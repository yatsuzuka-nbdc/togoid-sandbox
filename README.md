# CSV2TTL（新ツール）
## 要求仕様
CSV形式のレコードを受け取り、TTL形式で出力する。
## 詳細設計
### CSVの条件
- ヘッダー付きである。
- ヘッダーにはノードの接続関係（グラフにおけるエッジ情報）は含まれていない。

### TTLの条件
- Turtle formatrに準拠している。
- 改行を含まない文字列は指定のない限りダブルクオーテーション`"`1つで囲い、String型とする。
- 改行を含む文字列はダブルクオーテーション3つ`"""`で囲う。
- 文字列が`"`を含む場合、シングルクオーテーション`'`で囲う。
- 文字列の末端にクオーテーションが含まれる場合、スペースを挿入することで重複を避ける。（←要相談）

### コンフィグファイルへの要求
- エディターでの編集が容易である。
- RDFの入れ子構造を表現できる。
- RDFの述語を定義可能で、一つのカラムに対し複数の述語を対応させられる。（←要相談）
- 言語タグやprefixによる置換、URIとリテラルの区別が指定できる。（←要相談）
- 文字コードの指定ができる。
- CSV中の文字列をキーとした置換用の辞書を定義できる。
- CSVの１カラム内に複数の情報が入っている時（複数のノードに分割する必要があるとき）、区切り文字を指定できる。


# 旧ツール
## csv2ttl
### メリット
- csvはyamlより一般的で直感的に書きやすい。
- 現状yamlより設定の柔軟性が高いと思われる。（正確な差分は把握していない。）
- yamlのテンプレートの作り方にも依るが、設定箇所が多くなった場合csvの方が記述量が少ない。

## デメリット
- yamlでは書かなくてよい設定はcsvのように空欄を空けておく必要がないためスマート？（yamlの方をよく読んでいないので正確な差分は分からない。）

## CSV2TTL_harazono
### メリット
- 元のCSVを加工することなくRDFグラフを生成できるよう設計されている。
- CSVファイル中のURIをprefixに置換できる。
- CSVファイル中のリテラルに対して言語タグ(現在はja/enに対応)の付与ができる。
- CSVのカラム名を用いてノードが表現できる。
- CSV2TTLのカラムを複数箇所で主語/目的語として使える。
	- 主語として使う時、`a`で表現されるクラスを簡便に変えられる。
	- 目的語として使う時、述語を簡便に変えられる。

## デメリット
- 空ノードに名前を振っているため、CSVの異なる行の間でノードの重複が起きる（修正対象）。
	- 空ノードを用いたネストができない（名前付きノードなら可能）。
- yamlへの慣れが必要。NBDCの内部ならいいが、将来的に寄託者がRDF化までするとなると、少し勉強してもらうことになる。
	- 寄託者がRDF化するなら、いずれにせよグラフについて学ぶので、TTL/yamlの学習コストはデメリットではない？
- シンプルな変換に対して設定項目が冗長になるかもしれない。
- ノードの親子関係を設定ファイルを見るだけでは把握しづらい。
空ノードと書いているが、Empty nodeとAnonymous nodeと使い分ける方がいいかも。TTL形式では[]で表現される、名前のないAnonymous nodeは現在表現できない。

